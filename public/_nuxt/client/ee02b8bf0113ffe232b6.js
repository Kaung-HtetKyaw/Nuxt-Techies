(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{398:function(t,e,n){"use strict";n(50);var r=n(16),o=n(19),c=n(112),l={props:{collection:{type:String,required:!0},type:{type:String,required:!0,validator:function(t){return-1!==["update","create","delete"].indexOf(t)}},params:{type:Object,required:!0}},mixins:[c.a],data:function(){return{data:{},loading:!1}},created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.params.id||!t.params.fetch){e.next=4;break}return t.loading=!0,e.next=4,t.$store.dispatch("".concat(t.collection,"/fetch").concat(Object(o.a)(t.collection)),{id:t.params.id}).then((function(data){t.data=data,t.$emit("dataReady",t.data),t.loading=!1}));case 4:case"end":return e.stop()}}),e)})))()},methods:{writeFB:function(){var t=this;if(this.user){this.loading=!0;"".concat(this.collection,"s");var e="".concat(this.type).concat(Object(o.a)(this.collection));return this.$store.dispatch("".concat(this.collection,"/").concat(e),this.params).then((function(e){return t.loading=!1,e})).catch((function(t){return console.log(t)}))}}},render:function(){return this.$scopedSlots.default({writeFB:this.writeFB,data:this.data,loading:this.loading})}},d=n(22),component=Object(d.a)(l,void 0,void 0,!1,null,null,null);e.a=component.exports},401:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n(19),o=n(7);n(414);function c(t){var e=t.file,n=t.id,c=t.folder,l=t.progress,progress=void 0===l?r.h:l,d=t.error,f=void 0===d?r.h:d,h=t.success,v=void 0===h?r.h:h;console.log(n);var O=o.storage().ref("".concat(c,"/")+n).put(e);O.on("state_changed",progress,f,(function(){O.snapshot.ref.getDownloadURL().then((function(t){v(t)}))}))}function l(t){var e=t.folder,n=t.id;return o.storage().ref("".concat(e,"/")+n).delete()}},711:function(t,e,n){"use strict";n.r(e);n(10),n(8),n(5),n(3),n(6),n(59);var r=n(1),o=n(398),c=n(78),l=n(401);n(19);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={components:{"delete-topic":o.a},middleware:["auth"],data:function(){return{deleting:!1}},methods:{deleteTopic:function(t){var e=this,n=f({},this.topic);return e.deleting=!0,t().then((function(){e.deleteArticleFiles(n.kids),n.cover.url?(Object(l.a)({folder:"topics",id:n.cover.id}),e.$router.replace({name:"topics"}),e.deleting=!1):(e.$router.replace({name:"topics"}),e.deleting=!1)}))},deleteArticleFiles:function(t){var e=this;t.forEach((function(t){var article=e.getArticleByID(t);article.photo.url&&Object(l.a)({folder:"articles",id:article.photo.id})}))}},computed:f(f({},Object(c.b)({getTopicByID:"topic/getTopicByID",getArticleByID:"article/getArticleByID"})),{},{topic:function(){return this.getTopicByID(this.topicID)},topicID:function(){return this.$route.params.id}})},v=n(22),O=n(29),y=n.n(O),m=n(185),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Delete a topic")]),t._v(" "),n("delete-topic",{attrs:{type:"delete",collection:"topic",params:{id:t.topicID,fetch:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.writeFB;return[n("div",[n("div",[t.deleting?n("h1",[t._v("#DELETING........")]):n("h1",[t._v(t._s(t.topic.name))])]),t._v(" "),n("v-btn",{attrs:{loading:t.deleting},on:{click:function(e){return t.deleteTopic(r)}}},[t._v("Delete Topics")])],1)]}}])})],1)}),[],!1,null,null,null);e.default=component.exports;y()(component,{VBtn:m.a})}}]);